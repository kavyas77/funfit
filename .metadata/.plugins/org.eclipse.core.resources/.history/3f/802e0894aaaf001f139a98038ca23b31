<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <%@ page import="com.gym.model.Batch" %>
    <%@ page import="java.util.List" %>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Add Participant</title>
</head>
<body>
<h1>Add a New Participant</h1>
<c:if test="${not empty errorMessage}">
    <div style="color: red;">${errorMessage}</div>
</c:if>

<form action="<%= request.getContextPath() + "/participantServlet" %>" method="POST">
    <label for="name">Participant Name: </label>
    <input type="text" id="name" name="name" required><br><br>

    <label for="batch">Batch: </label>
    <select id="batch" name="batchId" required>
        <option value="">Select a Batch</option>
        <!-- Dynamically populate batches here using JSTL -->
        <c:choose>
            <c:when test="${not empty batches}">
                <c:forEach var="batch" items="${batches}">
                    <option value="${batch.batchId}">
                        ${batch.batchName} (Schedule: ${batch.time})
                    </option>
                </c:forEach>
            </c:when>
            <c:otherwise>
                <option value="">No batches available</option>
            </c:otherwise>
        </c:choose>
    </select><br><br>

    <input type="submit" value="Add Participant">
</form>

<br>
<a href="welcome.jsp">Back to Home</a>

</body>
</html>


